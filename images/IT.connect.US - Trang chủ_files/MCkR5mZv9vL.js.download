if (self.CavalryLogger) { CavalryLogger.start_js(["u2AoN"]); }

__d("TepigSubscriberCometQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"params"}],b=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"params"}],concreteType:"TepigTrackUnitMetadata",kind:"LinkedField",name:"tepig_post_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"post_type_based_trackable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id_based_trackable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_name_based_trackable",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"TepigSubscriberCometQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"TepigSubscriberCometQuery",selections:b},params:{id:"2328311430556732",metadata:{},name:"TepigSubscriberCometQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("TepigSubscriberQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"params"}],b=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"params"}],concreteType:"TepigTrackUnitMetadata",kind:"LinkedField",name:"tepig_post_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"post_name",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"TepigSubscriberQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"TepigSubscriberQuery",selections:b},params:{id:"2204155006350272",metadata:{},name:"TepigSubscriberQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("AnimatedImageMarauderLogger",["MarauderLogger"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(){this.$1=!1,this.$2=null,this.$3=null,this.$4=!1,this.$5=!1,this.$6=!1,this.$7=null,this.$8=!1,this.$9=null,this.$10=null,this.$11=0,this.$12=!1}var c=a.prototype;c.initSession=function(a,b,c,d,e,f){this.$1=a,this.$13=b,this.$6=d,this.$7=c,this.$8=e,this.$9=f,this.$4=!0};c.hasCurrentSession=function(){return this.$4};c.logAnimatedRender=function(a){this.$10&&this.$11===0&&(this.$2=a-this.$10,this.$5=!0)};c.logStaticClick=function(a){this.$10=a,this.$12=!0};c.endSession=function(a){this.$9&&(this.$11=a-this.$9),this.$4=!1,this.logSession()};c.logSession=function(){var a={autoplay:this.$1,download_time:this.$2,is_video:this.$6,image_src:this.$7,fbid:this.$13,load_succeeded:this.$5,plays_inline:this.$8,time_spent:this.$11,was_tapped:this.$12};b("MarauderLogger").log("animated_image_session",void 0,a)};return a}();e.exports=a}),null);
__d("FeedAnimatedImageShare.react",["cx","AnimatedImageMarauderLogger","DOMContainer.react","Event","Image.react","OnVisible.react","React","ReactDOM","ReactTransitionEvents","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){var h=b("React"),i=20;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={disableAutoplay:!1,hasPlayedAtleastOnce:!1,isLoaded:!1,isLoading:!1,isPlaying:!1,wasPlaying:!1},c.$3=null,c.$5=function(){c.setState({disableAutoplay:!0});if(!c.props.isPlayableInline){window.open(c.props.href,"_blank");return}c.state.isPlaying?c.pause("user_initiated"):c.play("user_initiated")},c.$7=function(){c.$2.reset()},c.$13=function(a){c.$2=a},c.$14=function(){c.$11(),!c.state.isPlaying&&c.props.isPlayableInline&&(c.$8()||c.state.wasPlaying)&&c.play(c.state.wasPlaying?"page_visibility_initiated":"autoplay_initiated")},c.$6=function(){c.$12(),c.setState({wasPlaying:c.state.isPlaying}),c.state.isPlaying&&c.pause("page_visibility_initiated")},c.play=function(a){c.$1.logStaticClick(Date.now());c.setState({isPlaying:!0});if(c.props.videoController){c.state.hasPlayedAtleastOnce||c.setState({hasPlayedAtleastOnce:!0});var b=c.props.videoController;b&&b.play(a)}else c.$9()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1=new(b("AnimatedImageMarauderLogger"))(),this.refs.playButton&&b("ReactTransitionEvents").addEndEventListener(b("ReactDOM").findDOMNode(this.refs.playButton),this.play),this.$4()};d.$4=function(){var a=this;if(!this.props.videoController||!this.refs.videoPlayer)return;b("ReactDOM").findDOMNode(this.refs.videoPlayer).addEventListener("click",this.$5);this.props.videoController.addListener("finishPlayback",function(){window.setTimeout(function(){a.props.videoController.play("loop_initiated")},1)});this.$3=new(b("SubscriptionsHandler"))();this.$3.addSubscriptions(b("Event").listen(window,"blur",this.$6),b("Event").listen(window,"focus",this.$7))};d.componentWillUnmount=function(){this.$3&&this.$3.release()};d.$8=function(){return this.props.autoplay&&!this.state.disableAutoplay};d.$9=function(){var a=this;if(this.state.isLoading)return;this.setState({isLoading:!0});var b=new Image();b.onload=function(){a.setState({hasPlayedAtleastOnce:!0,isLoaded:!0,isLoading:!1}),a.$1.logAnimatedRender(Date.now())};b.src=this.props.animatedSrc};d.$10=function(){if(this.props.disableClickToPlayButton)return null;var a=this.props.isPlayableInline&&(!this.state.isPlaying||this.state.isLoading),b=this.state.isLoading,c=!this.state.hasPlayedAtleastOnce&&this.state.isLoaded;return h.jsxs("div",{className:a?"":"hidden_elem",onClick:this.$5,role:"presentation",children:[h.jsx("div",{ref:"playButton",className:"_393-"+(c?" _30a":"")}),h.jsx("div",{className:"_30b"+(b?" _30c":"")+(c?" _30e":"")}),h.jsx("div",{className:"_30h"+(c?" _30i":"")})]})};d.$11=function(){this.$1.initSession(this.props.autoplay,this.props.fbid,this.props.href,this.props.isPlayableInline,!!this.props.videoController,Date.now())};d.$12=function(){this.$1&&this.$1.hasCurrentSession()&&this.$1.endSession(Date.now())};d.$15=function(){return!this.props.staticSrc?null:h.jsx(b("Image.react"),{className:"_9_m _30j",src:this.props.staticSrc,width:this.props.width,height:this.props.height,onClick:this.$5})};d.$16=function(){return h.jsx(b("Image.react"),{className:"_9_m",src:this.props.animatedSrc,width:this.props.width,height:this.props.height,onClick:this.$5})};d.$17=function(){return!this.state.isPlaying||!this.state.isLoaded||!this.props.isPlayableInline?this.$15():this.$16()};d.$18=function(){return!this.props.videoElement?null:h.jsxs("span",{children:[h.jsx("span",{className:this.state.hasPlayedAtleastOnce?"":"hidden_elem",children:h.jsx(b("DOMContainer.react"),{ref:"videoPlayer",children:this.props.videoElement})}),h.jsx("span",{className:this.state.hasPlayedAtleastOnce?"hidden_elem":"",children:this.$15()})]})};d.$19=function(){if(!this.state.isPlaying)if(this.props.overlayNode)return this.props.overlayNode;else if(this.props.overlay)return h.jsx(b("DOMContainer.react"),{children:this.props.overlay});return null};d.pause=function(a){this.setState({isPlaying:!1}),this.props.videoController&&this.props.videoController.pause(a)};d.render=function(){var a=-1*(this.props.height*i/100);return h.jsx(b("OnVisible.react"),{onVisible:this.$14,onHidden:this.$6,buffer:a,ref:this.$13,children:h.jsxs("div",{className:this.props.className,children:[this.$18()||this.$17(),this.$10(),this.$19()]})})};return c}(h.Component);a.defaultProps={autoplay:!1,isPlayableInline:!1};e.exports=a}),null);
__d("TepigCometPostsWaitingList",[],(function(a,b,c,d,e,f){"use strict";var g={};a=function(a){if(g[a]!=null)return!1;g[a]=1;return!0};e.exports={addToGraphqlCallList:a}}),null);
__d("TepigPostNames",[],(function(a,b,c,d,e,f){"use strict";var g={},h={};a=function(a,b){g[a]==null?g[a]=b:g[a]!==b&&(g[a]=b)};b=function(a,b,c,d){h[a]={error:null,id_type:d,post_or_ad_id:b,post_title:c}};c=function(a){return h[a]?h[a]:null};d=function(a){return g[a]?g[a]:null};e.exports={addPostName:a,addTepigCometTokenData:b,getPostName:d,getTepigCometTokenData:c}}),null);
__d("TepigProcessCometPosts",[],(function(a,b,c,d,e,f){"use strict";var g={};a=function(a,b,c){var d;d=(d=i(b))!=null?d:"";b=(b=j(b))!=null?b:null;if(!b)return!1;d=d+b;if(g[a.postOrAdId]==null){var e;g[a.postOrAdId]={data:(e={},e.enter=[],e.exit=[],e),isLogPresent:!1,warning:0};setTimeout(function(){h(c,a.postOrAdId)},3e3)}e=g[a.postOrAdId].data;if(b==="log"){g[a.postOrAdId].isLogPresent=!0;return!0}else if(!e[b].includes(d)){e[b].push(d);return!0}else if(e.enter.length===2&&e.exit.length===2){e.enter=[];e.exit=[];e[b].push(d);g[a.postOrAdId].warning=0;return!0}e.enter=[];e.exit=[];g[a.postOrAdId].warning=0;return!1};var h=function(a,b){g[b].isLogPresent||a()};b=function(a){var b=!0;Object.keys(g).map(function(c){if(a===c)return;c=g[c];c.data.enter.length!==2||c.data.exit.length%2!==0?(c.warning+=1,c.warning>30&&(b=!1)):c.warning=0});return b};var i=function(a){a=a.TepigExternalSignalPayload!=null?a.TepigExternalSignalPayload.impressionFramework:a.TepigExternalValidationSignalPayload!=null?a.TepigExternalValidationSignalPayload.impressionFramework:null;return a},j=function(a){a=a.TepigExternalSignalPayload!=null?a.TepigExternalSignalPayload.signalType:a.TepigExternalValidationSignalPayload!=null?a.TepigExternalValidationSignalPayload.signalType:null;return a};e.exports={addAndCheckTepig:a,verifyAllSignals:b}}),null);
__d("TepigSubscriber",["requireCond","BanzaiODS","DataAttributeUtils","RelayFBEnvironment","TepigCometPostsWaitingList","TepigPostNames","TepigProcessCometPosts","cr:1087053","gkx","promiseDone","relay-runtime","TepigSubscriberCometQuery.graphql","TepigSubscriberQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h,i=b("TepigCometPostsWaitingList").addToGraphqlCallList,j=b("TepigPostNames").addPostName,k=b("TepigPostNames").getPostName,l=b("TepigProcessCometPosts").addAndCheckTepig,m=b("TepigProcessCometPosts").verifyAllSignals,n=b("relay-runtime").fetchQuery;b("relay-runtime").graphql;var o=function(a,b){};a=[];var p=o,q=o,r=a;c=function(a){p=a;return function(){p=o}};d=function(a){q=a;s();return function(){q=o}};var s=function(){var a=null;r=r.filter(function(c){if(p!==o&&c.source==="blue"){if(!p(c.TepigInternalPayload,c.TepigExternalPayload))return c}else if(q!==o&&c.source==="comet"){if(!q(c.TepigInternalPayload,c.TepigExternalPayload))return c}else if(q===o&&c.source==="comet"&&!c.ranInBackground&&!c.TepigInternalPayload.graphqlData){a=c.TepigInternalPayload.postOrAdId;l(c.TepigInternalPayload,c.TepigExternalPayload,t)||b("cr:1087053")&&b("cr:1087053").report("Signal mismatch");c.ranInBackground=!0;return c}else return c});a&&!m(a)&&t()},t=function(){b("cr:1087053")&&b("cr:1087053").report("Log Failure")};f=function(a){if(!(b("gkx")("985099")||b("gkx")("1087054"))||!x(a))return;var c=a.TepigExternalSignalPayload?a.TepigExternalSignalPayload.targetElem?a.TepigExternalSignalPayload.targetElem:null:a.TepigExternalValidationSignalPayload?a.TepigExternalValidationSignalPayload.targetElem?a.TepigExternalValidationSignalPayload.targetElem:null:null,d=a.TepigExternalSignalPayload?a.TepigExternalSignalPayload.source:a.TepigExternalValidationSignalPayload?a.TepigExternalValidationSignalPayload.source:null;d==="blue"?w(c,a):d==="comet"&&v(a)};var u=function(a,b,c,d){if(a.error!=null)return;var e=Date.now();d={graphqlData:d,idType:(d=a.id_type)!=null?d:"post_id",postName:a.post_title,postOrAdId:a.post_or_ad_id,time:e};r.push({TepigExternalPayload:b,TepigInternalPayload:d,ranInBackground:!1,source:c});s()},v=function(a){if(a.TepigExternalSignalPayload==null||a.TepigExternalSignalPayload.trackable==null)return;var c=a.TepigExternalSignalPayload.trackable,d=i(c),e={error:null,id_type:"post_id",post_or_ad_id:c,post_title:"Retrieving"};u(e,a,"comet",!1);if(!d)return;e=g!==void 0?g:g=b("TepigSubscriberCometQuery.graphql");d={params:{trackable:c}};b("promiseDone")(n(b("RelayFBEnvironment"),e,d).then(function(b){if(b==null||b.tepig_post_metadata==null||b.tepig_post_metadata.post_type_based_trackable==null||b.tepig_post_metadata.post_id_based_trackable==null||b.tepig_post_metadata.post_name_based_trackable==null)return;b=b.tepig_post_metadata;var c={error:null,id_type:b.post_type_based_trackable,post_or_ad_id:b.post_id_based_trackable,post_title:b.post_name_based_trackable};j(b.id,b.post_name_based_trackable);u(c,a,"comet",!0)}))},w=function(a,c){if(a==null)return;var d={error:null,id_type:null,post_or_ad_id:"",post_title:""};try{a=JSON.parse(b("DataAttributeUtils").getDataFt(a));if(a!=null){var e;e=a==null?void 0:(e=a.page_insights)==null?void 0:(e=e[a==null?void 0:a.page_id])==null?void 0:(e=e.targets)==null?void 0:(e=e[0])==null?void 0:e.post_id;var f=a==null?void 0:a.adid;a=a==null?void 0:a.top_level_post_id;var g=null,i=null;e==null&&(e=a);if(f!=null&&f!==0){a=k(f);a!=null?(d.post_title=a,d.post_or_ad_id=f,u(d,c,"blue",!0)):(g=f,i="ad_id")}else if(e!=null&&e!==0){a=k(e);a!=null?(d.post_title=a,d.post_or_ad_id=e,u(d,c,"blue",!0)):(g=e,i="post_id")}if(g!=null&&i!=null){f=h!==void 0?h:h=b("TepigSubscriberQuery.graphql");e={params:(a={},a[i]=g,a)};b("promiseDone")(n(b("RelayFBEnvironment"),f,e).then(function(a){if(a==null||a.tepig_post_metadata==null||a.tepig_post_metadata.post_name==null||g==null||i==null)d.error="GraphQL query failed";else{var b;j(g,a==null?void 0:(b=a.tepig_post_metadata)==null?void 0:b.post_name);d.post_or_ad_id=g;d.post_title=(a=a==null?void 0:(b=a.tepig_post_metadata)==null?void 0:b.post_name)!=null?a:"";d.id_type=i;u(d,c,"blue",!0)}}))}}}catch(a){b("BanzaiODS").bumpEntityKey(4,"tepig_subscriber","subscriber failure. error fetching post_name using graphql."+a.message),d.error="Error caught (graphql attempt)"+String(a),u(d,c,"blue",!0)}},x=function(a){var b=["current_blue","intersection_observer_blue","impression_api_comet_enter","scroll_comet"],c=["enter","exit","log","validate"];if(a.TepigExternalSignalPayload!=null){var d=a.TepigExternalSignalPayload.impressionFramework,e=a.TepigExternalSignalPayload.signalType;if(b.includes(d)&&c.includes(e))return!0;else return!1}if(a.TepigExternalValidationSignalPayload!=null){b=a.TepigExternalValidationSignalPayload;d=b.validationSession.getPrimaryImpressionChannel();c=b.validationSession.getSecondaryImpressionChannel();if(d==="current_blue"&&c==="intersection_observer_blue")return!0;else return!1}return!1};e.exports={addTepigListener:d,sendSignal:f,subscribeToSignals:c}}),null);
__d("sendTepigValidationSignal",["TepigSubscriber"],(function(a,b,c,d,e,f){"use strict";var g=b("TepigSubscriber").sendSignal;function a(a,b,c,d,e,f,h){e={failureReason:e,impressionFramework:a,signalType:c,source:h,targetElem:b,validationResult:d,validationSession:f};a={TepigExternalSignalPayload:null,TepigExternalValidationSignalPayload:e};g(a)}e.exports=a}),null);
__d("ViewableSession",["ViewableSessionValidationWebResultTypedLogger","getCentralImpressionScrollSpeed","getCentralImpressionTimeAfterRefresh","sendTepigValidationSignal"],(function(a,b,c,d,e,f){"use strict";var g=1,h=0,i="impression when there was no active session",j="missing impression when session ends",k=1e3;a=function(){function a(a,b,c,d,e,f){this.$2=!1,this.$3=-1,this.$4=-1,this.$5=!1,this.$6=-1,this.$1=a,this.$7=b,this.$8=e,this.$9=c,this.$10=d,this.$11=f}var c=a.prototype;c.start=function(){this.$3=Date.now(),this.$2=!0};c.end=function(){this.$4=Date.now(),this.$2=!1};c.setImpressed=function(){this.$6=Date.now(),this.$5=!0};c.validate=function(){var a,c=null;if(this.$5)if(this.$3!==-1)a=g;else if(Date.now()-this.$6>k)a=h,c=i;else return!1;else if(!this.$2&&Date.now()-this.$4>k)a=h,c=j;else return!1;b("sendTepigValidationSignal")(this.$9,this.$11,"validate",a,c,this,"blue");var d=b("getCentralImpressionScrollSpeed")(),e=b("getCentralImpressionTimeAfterRefresh")();new(b("ViewableSessionValidationWebResultTypedLogger"))().setVerificationTime(Date.now()).setFbFeedLocation(this.$7).setSessionKey(this.$1).setExtras(this.$8).setVerifyResult(a).setFailureReason(c).setPrimaryImpressionChannel(this.$9).setSecondaryImpressionChannel(this.$10).setSessionStartTime(this.$3).setSessionEndTime(this.$4).setScrollSpeed(d).setTimeFromLoad(e).log();return!0};c.getSessionKey=function(){return this.$1};c.getPrimaryImpressionChannel=function(){return this.$9};c.getSecondaryImpressionChannel=function(){return this.$10};c.getImpressed=function(){return this.$5};return a}();e.exports=a}),null);
__d("ViewableSessionManager",["BanzaiODS","DataAttributeUtils","ViewableSession"],(function(a,b,c,d,e,f){"use strict";var g={},h=(d={},d.intersection_observer_blue=["current_blue"],d.scroll_based_blue=["current_blue"],d.current_blue=["intersection_observer_blue","scroll_based_blue"],d);function a(a,c){try{var d=l(a);d.map(function(d){var e=i(a,d,c),f=JSON.parse(b("DataAttributeUtils").getDataFt(c));if(!e||!f)return;e=j(e,(e=f.fbfeed_location)!=null?e:-1,d,a,JSON.stringify(f),c);e.start();e=i(d,a,c);e=j(e,(e=f.fbfeed_location)!=null?e:-1,a,d,JSON.stringify(f),c);e.setImpressed();k()})}catch(a){b("BanzaiODS").bumpEntityKey(2966,"impression_logging_debug","onItemEnterViewport"+a.message)}}function c(a,c){try{var d=l(a);d.map(function(b){b=i(a,b,c);if(!b)return;g[b]&&g[b].end();k()})}catch(a){b("BanzaiODS").bumpEntityKey(2966,"impression_logging_debug","onItemExitViewport"+a.message)}}function i(a,c,d){d=JSON.parse(b("DataAttributeUtils").getDataFt(d));if(d){var e,f,g=d.page_id;e=(e=d.top_level_post_id)!=null?e:(e=d)!=null?(e=e.page_insights)!=null?(e=e[g])!=null?(e=e.targets)!=null?(e=e[0])!=null?e.post_id:e:e:e:e:e;var h=d.adid;f=(f=h)!=null?f:e;d=d.fbfeed_location;if(h||e&&g)return[f,d,a,c].join("_")}return""}function j(a,c,d,e,f,h){g[a]||(g[a]=new(b("ViewableSession"))(a,c,d,e,f,h));return g[a]}function k(){Object.keys(g).map(function(a){g[a].validate()&&delete g[g[a].getSessionKey()]})}function l(a){return h[a]}e.exports={onItemEnterViewport:a,onItemExitViewport:c}}),null);